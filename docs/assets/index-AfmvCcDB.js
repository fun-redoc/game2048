(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const w of s.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&o(w)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();const f=document.getElementById("canvas"),h=3,n=[];for(let l=0;l<h;l++){n.push([]);for(let e=0;e<h;e++)n[l].push(0)}const c={vertButtonWidth:50,horzButtonHeigth:50},i={topButtonRow:[],bottomButtonRow:[],leftButtonCol:[],rightButtonCol:[],field:[]};let g={x:c.vertButtonWidth,y:0},B={x:c.vertButtonWidth,y:c.horzButtonHeigth+f.height-2*c.horzButtonHeigth},d=1/h*(f.width-2*c.vertButtonWidth);for(let l=0;l<h;l++){let e=g.x+l*d,t=g.y,o={x:e,y:t,w:d,h:c.horzButtonHeigth};i.topButtonRow.push(o),e=B.x+l*d,t=B.y;let r={x:e,y:t,w:d,h:c.horzButtonHeigth};i.bottomButtonRow.push(r)}let p={x:0,y:c.horzButtonHeigth},m={x:c.vertButtonWidth+f.width-2*c.vertButtonWidth,y:c.horzButtonHeigth},y=1/h*(f.height-2*c.horzButtonHeigth);for(let l=0;l<h;l++){let e=p.x,t=p.y+l*y,o={x:e,y:t,w:c.vertButtonWidth,h:y};i.leftButtonCol.push(o),e=m.x,t=m.y+l*y;let r={x:e,y:t,w:c.vertButtonWidth,h:y};i.rightButtonCol.push(r)}let k={x:c.vertButtonWidth,y:c.horzButtonHeigth},a={x:1/h*(f.width-2*c.vertButtonWidth),y:1/h*(f.height-2*c.horzButtonHeigth)};for(let l=0;l<h;l++){i.field.push([]);for(let e=0;e<h;e++)i.field[l].push({x:k.x+e*a.x,y:k.y+l*a.y,w:a.x,h:a.y})}function u(l,e){return e.x<=l.x&&l.x<=e.x+e.w&&e.y<=l.y&&l.y<=e.y+e.h}const x=[];f.onmouseup=l=>{const e={x:l.offsetX,y:l.offsetY};let t;for(let o=0;o<i.topButtonRow.length;o++)if(u(e,i.topButtonRow[o])){t={kind:"playUp",col:o};break}if(t===void 0){for(let o=0;o<i.bottomButtonRow.length;o++)if(u(e,i.bottomButtonRow[o])){t={kind:"playDown",col:o};break}}if(t===void 0){for(let o=0;o<i.leftButtonCol.length;o++)if(u(e,i.leftButtonCol[o])){t={kind:"playLeft",row:o};break}}if(t===void 0){for(let o=0;o<i.rightButtonCol.length;o++)if(u(e,i.rightButtonCol[o])){t={kind:"playRight",row:o};break}}if(t===void 0){for(let o=0;o<i.field.length;o++)for(let r=0;r<i.field[o].length;r++)if(u(e,i.field[o][r])){switch(l.button){case 0:t={kind:"setFour",row:o,col:r};break;case 2:t={kind:"setTwo",row:o,col:r};break}break}}t!==void 0&&x.push(t)};requestAnimationFrame(l=>{requestAnimationFrame(e=>b())});function v(l){for(let e=x.pop();e;e=x.pop())switch(e.kind){case"setFour":console.log(`Ã¨vent ${e.row},${e.col}`),n[e.row][e.col]===0&&(n[e.row][e.col]=4);break;case"setTwo":n[e.row][e.col]===0&&(n[e.row][e.col]=2);break;case"playLeft":{const t=n[e.row];for(let o=0;o<t.length;o++)if(t[o]!==0&&t[o]===t[o+1]){t[o]+=t[o+1];for(let r=o+1;r<t.length-1;r++)t[r]=t[r+1];t[t.length-1]=0}}break;case"playRight":{const t=n[e.row];for(let o=t.length-1;o>0;o--)if(t[o]!==0&&t[o]===t[o-1]){t[o]+=t[o-1];for(let r=o-1;r>0;r--)t[r]=t[r-1];t[0]=0}}break;case"playDown":for(let t=n.length-1;t>0;t--)if(n[t][e.col]!==0&&n[t][e.col]===n[t-1][e.col]){n[t][e.col]+=n[t-1][e.col];for(let o=t-1;o>0;o--)n[o][e.col]=n[o-1][e.col];n[0][e.col]=0}break;case"playUp":for(let t=0;t<n.length;t++)if(n[t][e.col]!==0&&n[t][e.col]===n[t+1][e.col]){n[t][e.col]+=n[t+1][e.col];for(let o=t+1;o<n.length-1;o++)n[o][e.col]=n[o+1][e.col];n[n.length-1][e.col]=0}break}}function R(){const l=f.getContext("2d");l.save(),l.font="48px courier-new",l.textBaseline="middle",l.textAlign="center",l.lineWidth=5,l.strokeStyle="blue",l.fillStyle="white",l.save();for(let e=0;e<i.topButtonRow.length;e++){const t=i.topButtonRow[e];l.fillRect(t.x,t.y,t.w,t.h),l.strokeRect(t.x,t.y,t.w,t.h),l.strokeStyle="black";let o="U";const r={x:t.x+t.w/2,y:t.y+t.h/2};l.strokeText(o,r.x,r.y)}l.restore(),l.save();for(let e=0;e<i.bottomButtonRow.length;e++){const t=i.bottomButtonRow[e];l.fillRect(t.x,t.y,t.w,t.h),l.strokeRect(t.x,t.y,t.w,t.h),l.strokeStyle="black";let o="D";const r={x:t.x+t.w/2,y:t.y+t.h/2};l.strokeText(o,r.x,r.y)}l.restore(),l.save();for(let e=0;e<i.leftButtonCol.length;e++){const t=i.leftButtonCol[e];l.fillRect(t.x,t.y,t.w,t.h),l.strokeRect(t.x,t.y,t.w,t.h),l.strokeStyle="black";let o="L";const r={x:t.x+t.w/2,y:t.y+t.h/2};l.strokeText(o,r.x,r.y)}l.restore(),l.save();for(let e=0;e<i.rightButtonCol.length;e++){const t=i.rightButtonCol[e];l.fillRect(t.x,t.y,t.w,t.h),l.strokeRect(t.x,t.y,t.w,t.h),l.strokeStyle="black";let o="R";const r={x:t.x+t.w/2,y:t.y+t.h/2};l.strokeText(o,r.x,r.y)}l.restore(),l.save(),l.fillStyle="gray";for(let e=0;e<h;e++)for(let t=0;t<h;t++){const o=i.field[e][t];if(l.fillRect(o.x,o.y,o.w,o.h),l.strokeStyle="blue",l.strokeRect(o.x,o.y,o.w,o.h),n[e][t]){const r={x:o.x+o.w/2,y:o.y+o.h/2};l.strokeStyle="white";let s=n[e][t].toString();l.strokeText(s,r.x,r.y)}}l.restore(),l.restore()}function b(l,e){v(),R(),requestAnimationFrame(t=>b())}
